<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>员工打卡系统</title>
    <style>
        body { background-color: #121212; color: white; font-family: sans-serif; text-align: center; }
        .btn { padding: 12px 24px; font-size: 18px; margin: 8px; border: none; border-radius: 6px; cursor: pointer; }
        .btn-green { background-color: #28a745; color: white; }
        .btn-orange { background-color: #fd7e14; color: white; }
        .btn-red { background-color: #dc3545; color: white; }
        .btn-purple { background-color: #6f42c1; color: white; }
        .btn-blue { background-color: #007bff; color: white; }
    </style>
    <script>
        function send(type) {
            fetch('/api/attendance', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type })
            })
            .then(res => res.json())
            .then(data => alert(data.message));
        }
        setInterval(() => {
            const now = new Date();
            document.getElementById('clock').textContent =
                now.getFullYear() + '/' + String(now.getMonth()+1).padStart(2, '0') + '/' + String(now.getDate()).padStart(2, '0') +
                ' ' + now.toLocaleTimeString();
        }, 1000);
    </script>
</head>
<body>
    <h1>员工打卡系统</h1>
    <div>欢迎, {{ username }}</div>
    <a href="/logout" class="btn btn-blue">退出</a>
    <h2 id="clock"></h2>
    <button class="btn btn-green" onclick="send('上班打卡')">🟢 上班打卡</button>
    <button class="btn btn-orange" onclick="send('午餐开始')">🟧 午餐开始</button>
    <button class="btn btn-orange" onclick="send('午餐结束')">🟧 午餐结束</button><br>
    <button class="btn btn-red" onclick="send('下班打卡')">🔴 下班打卡</button>
    <button class="btn btn-purple" onclick="send('加班开始')">🟣 加班开始</button>
    <button class="btn btn-purple" onclick="send('加班结束')">🟣 加班结束</button><br>
    <a href="/export" class="btn btn-blue">📥 导出记录</a>
</body>
</html>
