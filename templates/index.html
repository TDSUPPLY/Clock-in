
<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>打卡系统</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; padding: 20px; }
        button { margin: 10px; padding: 10px 20px; font-size: 16px; }
    </style>
    <script>
        function clock(type) {
            fetch('/api/attendance', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ type })
            })
            .then(res => res.json())
            .then(data => alert(data.message))
            .catch(err => alert('打卡失败'));
        }
        window.onload = function () {
            const reminders = {
                "09:00": "记得打卡啦！上班打卡开始。",
                "12:00": "午餐时间到啦！记得打卡午餐开始。",
                "12:30": "午餐结束，记得打卡返回工作状态。",
                "17:30": "下班时间到，记得打卡啦！",
            };
            setInterval(() => {
                const now = new Date();
                const hm = now.getHours().toString().padStart(2, '0') + ":" + now.getMinutes().toString().padStart(2, '0');
                if (reminders[hm]) alert(reminders[hm]);
            }, 60000);
        }
    </script>
</head>
<body>
    <h2>欢迎, {{ username }}</h2>
    <div>
        <button onclick="clock('上班打卡')">上班打卡</button>
        <button onclick="clock('午餐开始')">午餐开始</button>
        <button onclick="clock('午餐结束')">午餐结束</button>
        <button onclick="clock('下班打卡')">下班打卡</button>
        <button onclick="clock('加班开始')">加班开始</button>
        <button onclick="clock('加班结束')">加班结束</button>
    </div>
    <p><a href="/logout" style="color:#0f0">退出登录</a></p>
</body>
</html>
